COPY    START	0
FIRST   STL     RETARD
        LDB    #LENGTH
		BASE	LENGTH
CLOOP  +JSUB	RDREC
		LDA		LENGTH
		COMP   #0
		JEQ     ENDFIL
	   +JSUB   	WRREC
		J       CLOOP
ENDFIL  LDA     EOF
		STA     BUFFER
		LDA    #3
		STA     LENGTH
	   +JSUB   	WRREC
		J       @RETARD
EOF     BYTE    C'EOF'
RETARD  RESW    1
LENGTH  RESW    1
BUFFER  RESB    4096
.
.
.
RDREC	CLEAR	X
		CLEAR	A
		CLEAR	S
	   +LDT	   #4096
RLOOD	TD		INPUT
		JEQ		RLOOD
		RD		INPUT
		COMPR	A,S
		JEQ		EXIT
		STCH	BUFFER,X
		TIXR	T
		JLT		RLOOD
EXIT	STX		LENGTH
		RSUB
INPUT	BYTE	X'F1'
.
.
.
WRREC	CLEAR	X
		LDT		LENGTH
WLOOP	TD		OUTPUT
		JEQ		WLOOP
		LDCH	BUFFER,X
		WD		OUTPUT
		TIXR	T
		JLT		WLOOP
		RSUB
OUTPUT	BYTE	X'05'
		END		FIRST